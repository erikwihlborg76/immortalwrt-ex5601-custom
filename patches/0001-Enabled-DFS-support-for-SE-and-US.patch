From caf9a05fd731f8aa7eab28caccc76feaeca058ff Mon Sep 17 00:00:00 2001
From: Erik <erikwihlborg76@gmail.com>
Date: Sat, 20 Sep 2025 20:05:13 +0200
Subject: [PATCH] Enabled DFS support for SE and US

Signed-off-by: Erik <erikwihlborg76@gmail.com>
---
 .../mtwifi-cfg/files/mtwifi-cfg/mtwifi_cfg         | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

diff --git a/package/mtk/applications/mtwifi-cfg/files/mtwifi-cfg/mtwifi_cfg b/package/mtk/applications/mtwifi-cfg/files/mtwifi-cfg/mtwifi_cfg
index 59af8d48cc..265eec605a 100755
--- a/package/mtk/applications/mtwifi-cfg/files/mtwifi-cfg/mtwifi_cfg
+++ b/package/mtk/applications/mtwifi-cfg/files/mtwifi-cfg/mtwifi_cfg
@@ -420,9 +420,23 @@ function mtwifi_cfg_setup(argv)
         end
     end
 
+    -- RDRegion: handle just US and SE
+    if cfg.config.country == "US" then
+        dats.RDRegion = "FCC"
+    elseif cfg.config.country == "SE" then
+        dats.RDRegion = "CE"
+    end
+
     if cfg.config.channel == "auto" then
         dats.AutoChannelSelect = 3
         dats.Channel = 0
+        if cfg.config.band == "5g" and dats.RDRegion then
+            dats.IEEE80211H = 1
+            dats.DfsEnable = 1
+            dats.DfsZeroWait = 1
+            dats.DfsDedicatedZeroWait = 3
+            dats.DfsZeroWaitCacTime = 255
+        end
     else
         dats.AutoChannelSelect = 0
         dats.Channel = cfg.config.channel
-- 
2.51.0.windows.1

